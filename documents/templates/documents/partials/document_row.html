{% load humanize %}

<tr id="document-{{ document.id }}">
    <td>
        {% if document.is_favorite %}
        <i class="fas fa-star text-warning"></i>
        {% else %}
        <i class="far fa-star text-muted"></i>
        {% endif %}
    </td>
    <td>
        <a href="{% url 'documents:document_detail' document.id %}" class="text-decoration-none">
            <strong>{{ document.title|truncatechars:50 }}</strong>
        </a>
        <br>
        <small class="text-muted">{{ document.file_original_name }}</small>
    </td>
    <td>
        {% if document.category %}
        <span class="badge" style="background-color: {{ document.category.color }};">
            {{ document.category.name }}
        </span>
        {% else %}
        <span class="badge bg-secondary">Uncategorized</span>
        {% endif %}
    </td>
    <td>
        <span class="badge bg-info">{{ document.get_file_type_display|upper }}</span>
    </td>
    <td class="text-end">{{ document.file_size_display }}</td>
    <td>
        {% if document.is_compressed %}
        <span class="badge bg-success">
            <i class="fas fa-compress"></i> {{ document.compression_ratio_percentage }}%
        </span>
        {% else %}
        <span class="badge bg-secondary">
            {% if document.compression_status == 'pending' %}
                <i class="fas fa-clock"></i> Pending
            {% elif document.compression_status == 'compressing' %}
                <i class="fas fa-spinner fa-spin"></i> Compressing
            {% elif document.compression_status == 'skipped' %}
                <i class="fas fa-ban"></i> Skipped
            {% else %}
                Not compressed
            {% endif %}
        </span>
        {% endif %}
    </td>
    <td>{{ document.upload_date|naturaltime }}</td>
    <td>
        <div class="btn-group btn-group-sm">
            <a href="{% url 'documents:document_detail' document.id %}"
               class="btn btn-outline-primary" title="View">
                <i class="fas fa-eye"></i>
            </a>
            <a href="{% url 'documents:document_download' document.id %}"
               class="btn btn-outline-success" title="Download">
                <i class="fas fa-download"></i>
            </a>
            <a href="{% url 'documents:document_edit' document.id %}"
               class="btn btn-outline-secondary" title="Edit">
                <i class="fas fa-edit"></i>
            </a>
        </div>
    </td>
</tr>
