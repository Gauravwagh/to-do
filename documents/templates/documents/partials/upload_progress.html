<div id="upload-progress-container">
    {% if upload_status == 'uploading' %}
    <div class="alert alert-info">
        <div class="d-flex align-items-center">
            <div class="spinner-border spinner-border-sm me-2" role="status">
                <span class="visually-hidden">Uploading...</span>
            </div>
            <div class="flex-grow-1">
                <strong>Uploading file...</strong>
                <div class="progress mt-2" style="height: 20px;">
                    <div class="progress-bar progress-bar-striped progress-bar-animated"
                         role="progressbar"
                         style="width: {{ progress_percentage }}%"
                         aria-valuenow="{{ progress_percentage }}"
                         aria-valuemin="0"
                         aria-valuemax="100">
                        {{ progress_percentage }}%
                    </div>
                </div>
                <small class="text-muted">{{ uploaded_size }} / {{ total_size }}</small>
            </div>
        </div>
    </div>

    {% elif upload_status == 'processing' %}
    <div class="alert alert-warning">
        <div class="d-flex align-items-center">
            <i class="fas fa-cog fa-spin fa-2x me-3"></i>
            <div>
                <strong>Processing file...</strong>
                <p class="mb-0 small">Validating and preparing for compression</p>
            </div>
        </div>
    </div>

    {% elif upload_status == 'compressing' %}
    <div class="alert alert-info">
        <div class="d-flex align-items-center">
            <i class="fas fa-compress fa-2x me-3 text-primary"></i>
            <div>
                <strong>Compressing document...</strong>
                <p class="mb-0 small">Using {{ compression_algorithm|upper }} algorithm</p>
                <div class="progress mt-2" style="height: 15px;">
                    <div class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                         role="progressbar"
                         style="width: 100%"></div>
                </div>
            </div>
        </div>
    </div>

    {% elif upload_status == 'success' %}
    <div class="alert alert-success alert-dismissible fade show">
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        <div class="d-flex align-items-center">
            <i class="fas fa-check-circle fa-2x me-3"></i>
            <div>
                <strong>Upload complete!</strong>
                <p class="mb-2">Your document has been uploaded successfully.</p>
                {% if compression_savings %}
                <small class="text-muted">
                    <i class="fas fa-compress"></i>
                    Compressed: {{ compression_savings }} saved ({{ compression_ratio }}%)
                </small>
                {% endif %}
                <div class="mt-2">
                    <a href="{% url 'documents:document_detail' document_id %}" class="btn btn-sm btn-success me-2">
                        <i class="fas fa-eye"></i> View Document
                    </a>
                    <a href="{% url 'documents:document_list' %}" class="btn btn-sm btn-outline-success">
                        <i class="fas fa-list"></i> All Documents
                    </a>
                </div>
            </div>
        </div>
    </div>

    {% elif upload_status == 'error' %}
    <div class="alert alert-danger alert-dismissible fade show">
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        <div class="d-flex align-items-center">
            <i class="fas fa-exclamation-triangle fa-2x me-3"></i>
            <div>
                <strong>Upload failed!</strong>
                <p class="mb-1">{{ error_message }}</p>
                <small class="text-muted">Please try again or contact support if the problem persists.</small>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Auto-refresh during active operations -->
    {% if upload_status in 'uploading,processing,compressing' %}
    <div hx-get="{% url 'documents:upload_progress' upload_id %}"
         hx-trigger="every 1s"
         hx-swap="outerHTML"
         hx-target="#upload-progress-container"></div>
    {% endif %}
</div>
